type choice = +{'a : 1, 'b : 1, 'c : 1}

proc choose (x : 1) [c : choice] = 
    recv c (
        'a => fwd x c
      | 'c => fwd x c
    )

proc test_choose1 (x : 1, y : 1) [] =
    c : choice <- (send c 'a; send c ());
    try call choose (x) [c] catch send y ()
 
proc test_choose2 (x : 1, y : 1) [] =
    c : choice <- (send c 'b; send c ());
    try call choose (x) [c] catch send y ()

exec test_choose1

exec test_choose2